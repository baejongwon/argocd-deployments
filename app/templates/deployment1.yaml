{{- $namespace := .Values.namespace }}

apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-deploy-1
  namespace: {{ $namespace }}
  labels:
    app: web-app
    project: delivery
    deployment: web-deploy-1
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
      app: web-app
      deployment: web-deploy-1
  template:
    metadata:
      labels:
        app: web-app
        deployment: web-deploy-1
    spec:
      containers:
      - name: web-app
        image: "{{ .Values.image.repository1 }}:{{ .Values.image.tag1 }}"
        ports:
        - containerPort: 80
        resources:
          limits:
            memory: "500Mi"
            cpu: "500m"
